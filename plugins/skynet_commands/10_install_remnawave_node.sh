#!/bin/bash
# ============================================================ #
# ==   SKYNET ПЛАГИН: УСТАНОВКА REMNAWAVE НОДЫ НА СЕРВЕР    == #
# ============================================================ #
#
# ВАЖНО: этот скрипт выполняется НА УДАЛЁННОМ СЕРВЕРЕ через Skynet.
# Он НЕ должен спрашивать пользователя ни о чём (никаких read).
# Все параметры прилетают через переменные окружения.
#
# Ожидаемые переменные окружения (первый набросок):
#   SELFSTEAL_DOMAIN  — домен ноды (обязателен)
#   PANEL_IP          — IP панели для настройки фаервола (опционально)
#   CERT_MODE         — "panel_wildcard" или "node_acme"
#   NODE_SECRET_KEY   — приватный x25519 ключ (если нужен)
#
set -euo pipefail

log_info()  { echo "[INFO] $*"; }
log_warn()  { echo "[WARN] $*" >&2; }
log_error() { echo "[ERROR] $*" >&2; }

main() {
    if [[ -z "${SELFSTEAL_DOMAIN:-}" ]]; then
        log_error "SELFSTEAL_DOMAIN не задан. Плагин должен вызываться только из Решалы/Skynet с нужным окружением."
        exit 1
    fi

    log_info "Готовлю каркас установки ноды Remnawave для домена ${SELFSTEAL_DOMAIN}..."
    log_warn "Пока это только заготовка плагина. Реальная установка ноды будет добавлена позже."

    exit 0
}

main "$@"
