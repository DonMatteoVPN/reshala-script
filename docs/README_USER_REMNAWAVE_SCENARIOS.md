# Remnawave: сценарии установки с нуля

Этот файл — как маршрутная карта. Здесь собраны типовые сценарии, в какой
последовательности их запускать и что ты получишь в итоге.

---

## 1. Одиночный сервер: панель + первая нода

**Цель:** один сервер, на нём и панель, и рабочая нода.

### Шаги

1. Настрой DNS:
   - `panel.example.com` → IP сервера (панель);
   - `sub.example.com`   → IP сервера (страница подписки);
   - `node.example.com`  → IP сервера (домен ноды, лучше без Cloudflare‑прокси).
2. На сервере запусти Решалу:
   ```bash
   sudo reshala
   ```
3. В главном меню:
   - `[4] REMNAWAVE: УСТАНОВКА И УПРАВЛЕНИЕ` → `Установка компонентов Remnawave` → `Панель + нода на один сервер`.
4. Введи домены и логин администратора панели.
5. По желанию включи https (Let’s Encrypt).

### Что получится

- Рабочая панель Remnawave по домену панели.
- Страница подписки по отдельному домену.
- Первая нода, уже подключённая к панели и готовая к работе.

---

## 2. Отдельная панель + ноды на других серверах

**Цель:** один «центральный» сервер с панелью и несколько нод на других машинах.

### Часть A. Центральная панель

1. DNS:
   - `panel.example.com` → IP сервера с панелью;
   - `sub.example.com`   → тот же IP;
   - `node1.example.com` → IP сервера, где в будущем будет первая нода (резервируем заранее).
2. На сервере панели:
   ```bash
   sudo reshala
   ```
3. Меню:
   - `[4] REMNAWAVE: УСТАНОВКА И УПРАВЛЕНИЕ` → `Установка компонентов Remnawave` → `Только панель`.
4. Введи домены и логин администратора.
5. Включи https, если нужно.

Результат: панель и страница подписки на одном сервере, нода в настройках панели уже заведена логически, но реально ещё не установлена.

### Часть B. Первая нода на другом сервере

1. На сервере ноды настрой DNS:
   - `node1.example.com` → IP сервера ноды.
2. Получи из интерфейса Remnawave *API‑токен* (панель → раздел API Tokens).
3. На сервере ноды запусти Решалу:
   ```bash
   sudo reshala
   ```
4. Меню:
   - `[4] REMNAWAVE: УСТАНОВКА И УПРАВЛЕНИЕ` → `Установка компонентов Remnawave` → `Только нода (локально под уже подготовленную панель)`.
5. Введи адрес панели, API‑токен и домен ноды.
6. Выбери, как подключать ноду к внутренним сквадам панели:
   - только в один «основной» сквад,
   - или сразу во все внутренние сквады.
7. При желании включи https для домена ноды.

Результат: панель на одном сервере, нода на другом, всё связано через API и готово к выдаче подписок.

---

## 3. Флот из нескольких нод через Skynet

**Цель:** одна панель и сразу несколько нод на разных серверах флота, развернутые почти автоматически.

### Подготовка

1. Настрой Skynet в Решале и добавь сервера во флот.
2. Для каждой планируемой ноды настрой домен:
   - `node1.example.com` → IP сервера №1;
   - `node2.example.com` → IP сервера №2;
   - и так далее.
3. В интерфейсе панели создай один API‑токен с нужными правами.

### Сценарий: одна нода на один сервер

1. На сервере, где запущена Решала и есть флот:
   ```bash
   sudo reshala
   ```
2. Remnawave‑меню → `Ноды Remnawave` → пункт установки ноды через Skynet «на один сервер».
3. Введи адрес панели, API‑токен, домен ноды, имя ноды.
4. Выбери сервер из флота.
5. Укажи, нужен ли https на ноде.
6. Выбери режим подключения к внутренним сквадам (один или все).

### Сценарий: массовая раздача нод

1. Там же, в `Ноды Remnawave`, выбери пункт массовой установки.
2. Введи адрес панели и API‑токен (один раз).
3. Укажи порт нод (обычно 2222).
4. Выбери режим подключения к внутренним сквадам **для всех будущих нод**:
   - один внутренний сквад по умолчанию,
   - или все внутренние сквады.
5. Отметь сервера из флота, на которые хочешь раздать ноды.
6. Для каждого сервера мастер спросит домен ноды и имя ноды в панели.

Результат: за один проход получаешь сразу несколько нод, каждая со своим доменом, подключённая к панели.

---

## 4. Что делать, если что‑то пошло не так

1. В любом сомнительном случае лучше **переустановить через раздел переустановки**, а не удалять файлы руками.
2. Следи за логами через раздел «Управление панелью/нодой» — это самый быстрый способ понять, что происходит.
3. Если домены не резолвятся или смотрят не туда, где крутятся сервисы — сначала правь DNS, потом уже перезапускай мастера.
